FROM eclipse-temurin:17-jre-alpine

WORKDIR /lobby_boy

COPY build/libs/lobby_boy-*.jar lobby_boy.jar

EXPOSE 8080

CMD ["java", "-Dspring.profiles.active=prod", \
    "-XX:+UseContainerSupport", \
    "-Xmx180m", "-Xms90m", \
    "-XX:MaxMetaspaceSize=120m", \
    "-XX:+UseSerialGC", \
    "-XX:MaxHeapFreeRatio=30", \
    "-XX:MinHeapFreeRatio=10", \
    "-XX:+UseStringDeduplication", \
    "-Dspring.main.lazy-initialization=true", \
    "-Dspring.jmx.enabled=false", \
    "-jar", "lobby_boy.jar"]